/* themes.css ‚Äî Th√®mes via variables (viewer.css reste propre)
   Auto (par d√©faut) suit le th√®me Windows via prefers-color-scheme.

   ‚úÖ IMPORTANT :
   - Les variables utilis√©es par html{ background: var(--bg) } doivent √™tre sur :root (= html)
   - Donc on force les th√®mes sur :root[data-theme="..."] (et non body)
*/

/* =========================================================
   BASE : petits overrides communs (tous th√®mes)
   ========================================================= */
:root{
  /* valeurs fallback si un th√®me ne d√©finit pas tout */
  --overlay-bg: rgba(0,0,0,0.55);
  --thumb-bg: rgba(255,255,255,0.06);
  --thumb-fallback-bg: rgba(0,0,0,0.15);

  --border-soft: rgba(255,255,255,0.06);
  --top-actions-border: rgba(255,255,255,0.03);

  --soft-04: rgba(255,255,255,0.04);
  --soft-05: rgba(255,255,255,0.05);
}


/* =========================================================
   AUTO (par d√©faut) = TON TH√àME CLAIR
   - s'applique quand aucun data-theme n'est forc√©
   ========================================================= */
:root:not([data-theme]){
  /* <-- COPIE ICI EXACTEMENT les variables de ton th√®me clair premium */
  --bg:#f6f7fb;
  --bg2:#ffffff;
  --fg:#141824;
  --muted:#525b71;

  --primary:#2d6cdf;
  --accent:#0f7b50;

  --border:#d9deeb;
  --border-soft: rgba(20,24,36,0.10);

  --card:#ffffff;
  --btn:#eef2fb;

  --title:#0f1320;
  --topbar-bg: rgba(246,247,251,.88);

  --body-grad-1:#f6f7fb;
  --body-grad-2:#f3f6ff;
  --body-grad-3:#f7f7fa;

  --popover-bg: rgba(255,255,255,0.94);
  --hover-bg: rgba(20,24,36,0.06);

  --overlay-bg: rgba(12,14,18,0.45);

  --thumb-bg: rgba(45,108,223,0.08);
  --thumb-fallback-bg: rgba(20,24,36,0.06);

  --scrollbar-thumb:#c4cadb;
  --scrollbar-track:#eef1f8;
  --scrollbar-track-webkit: var(--scrollbar-track);
  --scrollbar-thumb-webkit: var(--scrollbar-thumb);
  --scrollbar-thumb-webkit-hover:#b0b7cc;

  --top-actions-border: rgba(20,24,36,0.05);
  --soft-04: rgba(20,24,36,0.04);
  --soft-05: rgba(20,24,36,0.06);

  --card-hover-border: rgba(45,108,223,0.55);
  --card-hover-shadow:
    0 0 0 1px rgba(45,108,223,0.18),
    0 14px 38px rgba(17,19,24,0.12);
  --card-hover-bg: var(--card);

  color-scheme: light;
}

/* gradient uniquement quand c'est clair (auto clair, clair, white) */
:root:not([data-theme]) body,
:root[data-theme="clair"] body,
:root[data-theme="white"] body{
  background:
    radial-gradient(1200px 600px at 18% 0%, rgba(45,108,223,0.10), transparent 60%),
    radial-gradient(900px 500px at 90% 10%, rgba(15,123,80,0.08), transparent 55%),
    linear-gradient(180deg, var(--body-grad-1), var(--body-grad-2) 30%, var(--body-grad-3));
  background-attachment: fixed;
}

/* auto + Windows sombre => pas de gradient clair */
@media (prefers-color-scheme: dark){
  :root:not([data-theme]) body{
    background: none;
  }
}


/* =========================================================
   AUTO + Windows sombre = TON TH√àME SOMBRE
   (uniquement si aucun data-theme n'est forc√©)
   ========================================================= */
@media (prefers-color-scheme: dark){
  :root:not([data-theme]){
    /* <-- COPIE ICI EXACTEMENT les variables de :root[data-theme="dark"] */
    --bg:#0f1117;
    --bg2:#141826;
    --fg:#e8eaf0;
    --muted:#aab2c8;
    --primary:#5aa2ff;
    --accent:#6ce0b0;
    --border:#23283b;
    --card:#171b29;
    --btn:#1e2437;

    --title: var(--fg);
    --topbar-bg: rgba(16,20,37,.9);

    --body-grad-1:#0d1018;
    --body-grad-2:#101425;
    --body-grad-3:#0f1117;

    --popover-bg: rgba(20,24,38,0.98);
    --hover-bg: rgba(255,255,255,0.06);

    --scrollbar-thumb:#303a57;
    --scrollbar-track:#0b0e14;
    --scrollbar-track-webkit: var(--scrollbar-track);
    --scrollbar-thumb-webkit: var(--scrollbar-thumb);
    --scrollbar-thumb-webkit-hover:#3f4b6b;

    --card-hover-border: rgba(255,255,255,0.22);
    --card-hover-shadow:
      0 0 0 1px rgba(255,255,255,0.18),
      0 0 22px -6px rgba(255,255,255,0.18),
      0 14px 38px rgba(0,0,0,0.45);
    --card-hover-bg: var(--card);

    color-scheme: dark;
  }
}


/* =========================================================
   FORC√â : sombre (identique √† ton style actuel)
   ========================================================= */
:root[data-theme="dark"]{
  --bg:#0f1117;
  --bg2:#141826;
  --fg:#e8eaf0;
  --muted:#aab2c8;
  --primary:#5aa2ff;
  --accent:#6ce0b0;
  --border:#23283b;
  --card:#171b29;
  --btn:#1e2437;

  --title: var(--fg);
  --topbar-bg: rgba(16,20,37,.9);

  --body-grad-1:#0d1018;
  --body-grad-2:#101425;
  --body-grad-3:#0f1117;

  --popover-bg: rgba(20,24,38,0.98);
  --hover-bg: rgba(255,255,255,0.06);

  --scrollbar-thumb:#303a57;
  --scrollbar-track:#0b0e14;
  --scrollbar-track-webkit: var(--scrollbar-track);
  --scrollbar-thumb-webkit: var(--scrollbar-thumb);
  --scrollbar-thumb-webkit-hover:#3f4b6b;

  /* ‚úÖ hover ‚Äútheme engine‚Äù (dark) */
  --card-hover-border: rgba(255,255,255,0.22);
  --card-hover-shadow:
    0 0 0 1px rgba(255,255,255,0.18),
    0 0 22px -6px rgba(255,255,255,0.18),
    0 14px 38px rgba(0,0,0,0.45);
  --card-hover-bg: var(--card);

  color-scheme: dark;
}


/* =========================================================
   FORC√â : clair (alias : white) ‚Äî clair premium, pas ‚Äúblanc pur‚Äù
   ========================================================= */
:root[data-theme="clair"],
:root[data-theme="white"]{
  --bg:#f6f7fb;
  --bg2:#ffffff;
  --fg:#141824;
  --muted:#525b71;

  --primary:#2d6cdf;
  --accent:#0f7b50;

  --border:#d9deeb;
  --border-soft: rgba(20,24,36,0.10);

  --card:#ffffff;
  --btn:#eef2fb;

  --title:#0f1320;
  --topbar-bg: rgba(246,247,251,.88);

  --body-grad-1:#f6f7fb;
  --body-grad-2:#f3f6ff;
  --body-grad-3:#f7f7fa;

  --popover-bg: rgba(255,255,255,0.94);
  --hover-bg: rgba(20,24,36,0.06);

  --overlay-bg: rgba(12,14,18,0.45);

  --thumb-bg: rgba(45,108,223,0.08);
  --thumb-fallback-bg: rgba(20,24,36,0.06);

  --scrollbar-thumb:#c4cadb;
  --scrollbar-track:#eef1f8;
  --scrollbar-track-webkit: var(--scrollbar-track);
  --scrollbar-thumb-webkit: var(--scrollbar-thumb);
  --scrollbar-thumb-webkit-hover:#b0b7cc;

  --top-actions-border: rgba(20,24,36,0.05);
  --soft-04: rgba(20,24,36,0.04);
  --soft-05: rgba(20,24,36,0.06);

  --card-hover-border: rgba(45,108,223,0.55);
  --card-hover-shadow:
    0 0 0 1px rgba(45,108,223,0.18),
    0 14px 38px rgba(17,19,24,0.12);
  --card-hover-bg: var(--card);

  color-scheme: light;
}

/* =========================================================
   NO√ãL (sapin + rouge + neige visible)
   ========================================================= */
:root[data-theme="noel"]{

  /* üåå fond nuit hivernale */
  --bg:#061611;
  --bg2:#0a2018;

  /* ‚ùÑÔ∏è texte neige */
  --fg:#f4fff9;
  --muted:#c7e6d6;

  /* üéÑ vert sapin */
  --primary:#1faa59;

  /* üéÖ rouge BIEN visible */
  --accent:#ff3b3b;

  --border:#1f5a43;

  /* cartes plus neutres, pas ‚Äúfull green‚Äù */
  --card:#0f1c17;
  --btn:#163a2c;

  --title: var(--fg);

  /* üî• Topbar avec reflet rouge */
  --topbar-bg: linear-gradient(
      90deg,
      rgba(6,22,17,.95),
      rgba(255,59,59,.22)
  );

  --body-grad-1:#040d0a;
  --body-grad-2:#061611;
  --body-grad-3:#0b2219;

  --popover-bg: rgba(15,28,23,.98);
  --hover-bg: rgba(255,255,255,0.08);

  --scrollbar-thumb:#2f8f68;
  --scrollbar-track:#030a07;
  --scrollbar-thumb-webkit-hover:#3fb07c;

  /* ‚úÖ hover ‚Äútr√®s No√´l‚Äù (rouge + un peu vert) */
  --card-hover-border: #ff3b3b;
  --card-hover-shadow:
    0 0 0 1px rgba(255,59,59,.65),
    0 0 26px rgba(255,59,59,.22),
    0 18px 44px rgba(0,0,0,.55);
  --card-hover-bg:
    linear-gradient(145deg, rgba(255,59,59,.10), rgba(31,170,89,.08));

  color-scheme: dark;
}

/* ‚ùÑÔ∏è neige + aurore froide (sans images, 100% CSS) */
:root[data-theme="noel"] body{
  background:
    /* flocons (petits points) */
    radial-gradient(circle at 10% 20%, rgba(255,255,255,0.22) 0 1px, transparent 2px),
    radial-gradient(circle at 30% 80%, rgba(255,255,255,0.18) 0 1px, transparent 2px),
    radial-gradient(circle at 70% 35%, rgba(255,255,255,0.20) 0 1px, transparent 2px),
    radial-gradient(circle at 85% 70%, rgba(255,255,255,0.16) 0 1px, transparent 2px),
    /* aurora (glow) */
    radial-gradient(1200px 700px at 15% 0%, rgba(24,195,122,0.18), transparent 60%),
    radial-gradient(1100px 650px at 85% 10%, rgba(255,47,67,0.12), transparent 55%),
    radial-gradient(900px 600px at 60% 0%, rgba(72,155,255,0.12), transparent 60%),
    /* base */
    linear-gradient(180deg, #04080c 0%, #050d12 35%, #07151f 100%);
  background-size:
    220px 220px,
    260px 260px,
    240px 240px,
    280px 280px,
    auto, auto, auto,
    auto;
  background-attachment: fixed;
}

/* =========================================================
   NO√ãL ‚Äî NEIGE QUI TOMBE (ANTI-GRILLE / PLUS "VRAIE")
   - 2 couches (::before proche, ::after loin)
   - chaque couche = 3 motifs diff√©rents superpos√©s
   - animation = background-position + transform (vent)
   ========================================================= */

:root[data-theme="noel"]{
  position: relative;
}

:root[data-theme="noel"]::before,
:root[data-theme="noel"]::after{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2147483647;
  background-repeat: repeat;
  will-change: transform, background-position;
}

/* couche proche : flocons + vari√©s */
:root[data-theme="noel"]::before{
  opacity: .55;
  /* 3 motifs = casse la r√©p√©tition */
  background-image:
    radial-gradient(circle, rgba(255,255,255,.90) 0 1.2px, transparent 1.7px),
    radial-gradient(circle, rgba(255,255,255,.70) 0 1.0px, transparent 1.6px),
    radial-gradient(circle, rgba(255,255,255,.55) 0 0.9px, transparent 1.5px);
  background-size:
    110px 140px,
    160px 120px,
    220px 180px;
  background-position:
    0   -200px,
    60px -120px,
    120px -260px;

  animation: snowNear 10.5s linear infinite;
}

/* couche loin : plus fine + lente */
:root[data-theme="noel"]::after{
  opacity: .38;
  filter: blur(.35px);
  background-image:
    radial-gradient(circle, rgba(255,255,255,.70) 0 0.8px, transparent 1.35px),
    radial-gradient(circle, rgba(255,255,255,.45) 0 0.7px, transparent 1.3px),
    radial-gradient(circle, rgba(255,255,255,.35) 0 0.6px, transparent 1.2px);
  background-size:
    190px 220px,
    260px 200px,
    340px 280px;
  background-position:
    30px -260px,
    140px -180px,
    220px -340px;

  animation: snowFar 17.5s linear infinite;
}

/* =========================================================
   NEIGE PLUS NATURELLE (mouvements ind√©pendants)
   ========================================================= */

/* couche proche */
@keyframes snowNear{
  0%{
    background-position:
      0   -200px,
      60px -120px,
      120px -260px;
  }

  25%{
    background-position:
      18px -80px,
      40px  10px,
      135px -150px;
  }

  50%{
    background-position:
      -12px 60px,
      75px  140px,
      90px  -10px;
  }

  75%{
    background-position:
      24px 170px,
      30px 260px,
      160px 120px;
  }

  100%{
    background-position:
      6px 320px,
      58px 420px,
      126px 260px;
  }
}

/* couche lointaine */
@keyframes snowFar{
  0%{
    background-position:
      30px -260px,
      140px -180px,
      220px -340px;
  }

  30%{
    background-position:
      48px -120px,
      120px  0px,
      250px -210px;
  }

  55%{
    background-position:
      14px 40px,
      165px 160px,
      200px -20px;
  }

  80%{
    background-position:
      52px 200px,
      110px 320px,
      270px 120px;
  }

  100%{
    background-position:
      34px 420px,
      145px 520px,
      235px 260px;
  }
}


/* =========================================================
   HALLOWEEN (cinematic pumpkin)
   ========================================================= */
:root[data-theme="halloween"]{

  --bg:#08050c;
  --bg2:#110916;

  --fg:#fff3e6;
  --muted:#e4c9a6;

  /* üéÉ ORANGE DOMINANT */
  --primary:#ff7a00;

  /* üîÆ violet magique */
  --accent:#9c6bff;

  --border:#3a1f4d;
  --card:#140a1a;
  --btn:#1c0f25;

  --title: var(--fg);

  --topbar-bg: linear-gradient(
      90deg,
      rgba(8,5,12,.95),
      rgba(255,122,0,.22)
  );

  --body-grad-1:#050308;
  --body-grad-2:#08050c;
  --body-grad-3:#120816;

  --popover-bg: rgba(20,10,26,.98);
  --hover-bg: rgba(255,255,255,0.06);

  --scrollbar-thumb:#6a35a0;
  --scrollbar-track:#030205;
  --scrollbar-thumb-webkit-hover:#8446c8;

  /* ‚úÖ hover ‚ÄúHalloween‚Äù (orange + glow) */
  --card-hover-border: #ff7a00;
  --card-hover-shadow:
    0 0 0 1px rgba(255,122,0,.70),
    0 0 30px rgba(255,122,0,.22),
    0 18px 44px rgba(0,0,0,.60);
  --card-hover-bg:
    linear-gradient(145deg, rgba(255,122,0,.10), rgba(156,107,255,.07));

  color-scheme: dark;
}


/* =====================================================
   THEME HOVER ENGINE (1 seule fois)
   - Rend les th√®mes VRAIMENT visibles
   ===================================================== */
.card{
  transition:
    transform .18s ease,
    box-shadow .18s ease,
    border-color .18s ease,
    background .18s ease;
}

.card:hover{
  transform: translateY(-4px);
  border-color: var(--card-hover-border, var(--border));
  box-shadow: var(--card-hover-shadow, 0 12px 34px rgba(0,0,0,.25));
  background: var(--card-hover-bg, var(--card));
}
