<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="referrer" content="no-referrer">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>f95list_andric31_viewer</title>

  <link rel="icon" href="./favicon.png" />
  <link rel="stylesheet" href="./viewer.css" />
</head>
<body>
  <div id="viewerPage">
<script>
(function () {
  const p = new URLSearchParams(location.search);

  // ğŸ® si on a id ou uid â†’ page jeu
  if (p.has("id") || p.has("uid")) {
    const qs = p.toString();
    location.replace("./game/game.html?" + qs);
    return;
  }

  // ğŸ‘€ sinon â†’ viewer normal
  const s = document.createElement("script");
  s.src = "./viewer.js";
  document.body.appendChild(s);
})();
</script>
  </div>

  <div id="gamePage" style="display:none">
<div class="wrap">

    <!-- â˜° topbar -->
    <div class="topbar">
      <button id="hamburgerBtn" class="hamburger-btn" aria-label="Ouvrir le menu" aria-haspopup="menu" aria-expanded="false">
        <span class="ham-lines" aria-hidden="true"><span></span><span></span><span></span></span>
      </button>
      <h1>Traductions</h1>
    </div>

    <!-- popover menu (si ton viewer.menu.js existe dans /ant28jsp/) -->
    <div id="topMenuPopover" class="hidden"></div>

    <div id="errBox"></div>

    <section id="card" class="card">
      <div class="cardInner">

        <!-- HERO -->
        <div class="hero">
          <img id="cover" class="is-placeholder" alt="">
          <div>
            <h2 id="title">â€”</h2>
            <div id="badges"></div>
            <div id="tags"></div>
          </div>
        </div>

        <!-- related auto inject -->
        <!-- (game.js va crÃ©er #relatedOut juste aprÃ¨s #tags) -->

        <!-- description (existe dÃ©jÃ , game.js dÃ©place le bloc) -->
        <div id="descriptionBox" class="game-block" style="display:none;">
          <h3>ğŸ“œ Description</h3>
          <div id="descriptionText" style="color:var(--muted); line-height:1.45;"></div>
        </div>

        <!-- boutons -->
        <div class="btnMainRow">
          <a id="btnDiscord" class="btn btn-discord" target="_blank" rel="noopener" href="#">ğŸ’¬ Discord</a>
          <a id="btnF95" class="btn btn-f95" target="_blank" rel="noopener" href="#"><span class="f95-white"> F95</span><span class="f95-red">Zone</span></a>
        </div>

        <!-- MEGA -->
        <div class="btnRow">
          <a id="btnMega" class="btn" target="_blank" rel="noopener" href="#">ğŸ“¥ TÃ©lÃ©charger la traduction (MEGA)</a>

          <div class="likeWrap">
            <button id="btnLike" type="button" aria-label="Jâ€™aime">ğŸ¤</button>
          </div>
        </div>

        <!-- Stats -->
        <div id="statsOut" class="game-block">
          <h3>ğŸ“Š Statistiques</h3>
          <div class="statsLine">
            ğŸ‘ï¸ Vues : <span id="statViews" class="statNum">0</span>
            ğŸ“¥ TÃ©lÃ©chargements : <span id="statMegaClicks" class="statNum">0</span>
            â¤ï¸ Jâ€™aime : <span id="statLikes" class="statNum">0</span>
          </div>
        </div>

        <!-- Notes -->
        <div id="notesBox" class="game-block" style="display:none;">
          <h3>ğŸ“ Notes</h3>
          <div id="notesText" style="color:var(--muted); line-height:1.45;"></div>
        </div>

        <!-- Archives -->
        <div id="archiveBox" style="display:none; align-items:center; gap:10px;">
          <a id="archiveLink" class="btn" target="_blank" rel="noopener" href="#">ğŸ“¦ Archives de la traduction</a>
        </div>

        <!-- Rating -->
        <div id="ratingBox" class="game-block">
          <h3>â­ Note de la traduction</h3>
          <div style="display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;">
            <div>
              Moyenne : <strong id="ratingAvg">â€”</strong> Â· Votes : <strong id="ratingCount">0</strong>
            </div>
            <div id="ratingChoices" style="display:flex; gap:8px; flex-wrap:wrap;"></div>
          </div>
          <div id="ratingMsg" style="margin-top:8px; color:var(--muted); font-size:13px;"></div>
        </div>

      </div>
    </section>
  </div>

  <!-- âœ… Si tu as ces scripts dans /ant28jsp/, tu peux les activer -->
  <!--



  -->

  <!-- âœ… le principal -->

  </div>

  <script>
    (function() {
      const p = new URLSearchParams(location.search);
      const hasGame = (p.get("id") || p.get("uid"));
      const vp = document.getElementById("viewerPage");
      const gp = document.getElementById("gamePage");
      if (vp) vp.style.display = hasGame ? "none" : "";
      if (gp) gp.style.display = hasGame ? "" : "none";
      document.body.classList.toggle("page-game", !!hasGame);
    })();
  </script>

  <!-- Scripts communs -->
  <script src="./viewer.annonce.js"></script>
  <script src="./viewer.menu.js"></script>
  <script src="./viewer.menu.about.js"></script>
  <script src="./viewer.menu.extension.js"></script>

  <!-- Viewer / Game (chacun s'auto-dÃ©sactive si pas sur sa page) -->
  <script src="./viewer.js"></script>
  <script src="./game.js"></script>
</body>
</html>
