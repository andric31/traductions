<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="referrer" content="no-referrer">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jeu</title>

  <!-- ‚úÖ favicon du traducteur -->
  <link rel="icon" href="../favicon.png" />

  <!-- ‚úÖ tu peux r√©utiliser ton CSS si tu veux (ou enlever) -->
  <link rel="stylesheet" href="../viewer.css" />

  <!-- ‚úÖ mini CSS fallback (si viewer.css ne contient pas le style game) -->
  <style>
    :root{
      --bgTop:#0e1117; --bgBottom:#0b0f14; --card:#161b22; --border:#30363d;
      --fg:#e6edf3; --muted:#9aa4b2; --accent:#58a6ff; --radius:14px;
    }
    body{
      margin:0; color:var(--fg);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
      background: linear-gradient(180deg,var(--bgTop),var(--bgBottom));
      min-height:100vh;
    }
    .wrap{ max-width:980px; margin:0 auto; padding:18px 16px 42px; }
    .topbar{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin:10px 0 14px; }
    .topbar h1{ margin:0; font-size:20px; font-weight:800; letter-spacing:.2px; }
    .hamburger-btn{
      width:42px;height:42px;border-radius:12px;border:1px solid var(--border);
      background:rgba(22,27,34,.8); color:var(--fg); cursor:pointer;
      display:inline-flex; align-items:center; justify-content:center;
    }
    .ham-lines span{ display:block; width:18px; height:2px; background:var(--fg); margin:3px 0; border-radius:2px; opacity:.9; }
    .card{
      border:1px solid var(--border);
      background: rgba(22,27,34,.86);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.22);
    }
    .cardInner{ padding:16px; display:grid; gap:12px; }
    .hero{ display:grid; grid-template-columns: 210px 1fr; gap:14px; align-items:start; }
    @media (max-width:720px){ .hero{ grid-template-columns:1fr; } }
    #cover{
      width:100%; aspect-ratio: 16/9; object-fit:cover;
      border-radius: 14px; border:1px solid var(--border);
      background: rgba(255,255,255,.04);
    }
    #cover.is-placeholder{ background: rgba(255,255,255,.04); }
    #title{ font-size:22px; font-weight:900; line-height:1.15; margin:0; }
    #badges{ display:flex; flex-wrap:wrap; gap:6px; }
    .badge{ font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); background:rgba(255,255,255,.04); }
    .status-updated{ border-color: rgba(34,197,94,.4); }
    .status-outdated{ border-color: rgba(234,179,8,.4); }
    #tags{ display:flex; flex-wrap:wrap; gap:6px; }
    .tagPill{ font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); background:rgba(255,255,255,.04); }
    .btnRow,.btnMainRow{ display:flex; gap:10px; flex-wrap:wrap; }
    a.btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 12px; border-radius:12px; text-decoration:none;
      border:1px solid var(--border); background:rgba(255,255,255,.04);
      color:var(--fg); font-weight:700;
    }
    a.btn:hover{ border-color: rgba(88,166,255,.6); }
    .btn-discord{ background: rgba(88,166,255,.10); }
    .btn-f95{ background: rgba(225,0,15,.08); }
    .f95-white{ color:#fff; font-weight:900; }
    .f95-red{ color:#e1000f; font-weight:900; }
    .game-block{
      border:1px solid var(--border);
      background: rgba(0,0,0,.12);
      border-radius: var(--radius);
      padding:12px 12px;
    }
    .game-block h3{ margin:0 0 8px; font-size:14px; letter-spacing:.2px; }
    #errBox{
      display:none; margin:16px 0; padding:12px; border-radius:12px;
      border:1px solid rgba(225,0,15,.35); background: rgba(225,0,15,.08);
      color: var(--fg);
    }
    #statsOut{ display:none; }
    .statsLine{ display:flex; gap:14px; flex-wrap:wrap; font-size:13px; color: var(--muted); }
    .statNum{ color: var(--fg); font-weight:800; }
    .likeWrap{ display:flex; align-items:center; gap:8px; }
    #btnLike{
      width:40px;height:40px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.04); color:var(--fg); cursor:pointer;
      font-size:18px;
    }
    #ratingBox .ratingStar, #ratingBox .ratingCancel{
      border:1px solid var(--border); background:rgba(255,255,255,.04);
      border-radius:10px; padding:6px 10px; cursor:pointer;
      color:var(--fg);
    }
    #topMenuPopover.hidden{ display:none; }
    #topMenuPopover{
      position:fixed; z-index:9999; min-width: 230px;
      border:1px solid var(--border); background: rgba(22,27,34,.95);
      border-radius: 14px; padding:10px;
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- ‚ò∞ topbar -->
    <div class="topbar">
      <button id="hamburgerBtn" class="hamburger-btn" aria-label="Ouvrir le menu" aria-haspopup="menu" aria-expanded="false">
        <span class="ham-lines" aria-hidden="true"><span></span><span></span><span></span></span>
      </button>
      <h1>Traductions</h1>
    </div>

    <!-- popover menu (si ton viewer.menu.js existe dans /ant28jsp/) -->
    <div id="topMenuPopover" class="hidden"></div>

    <div id="errBox"></div>

    <section id="card" class="card">
      <div class="cardInner">

        <!-- HERO -->
        <div class="hero">
          <img id="cover" class="is-placeholder" alt="">
          <div>
            <h2 id="title">‚Äî</h2>
            <div id="badges"></div>
            <div id="tags"></div>
          </div>
        </div>

        <!-- related auto inject -->
        <!-- (game.js va cr√©er #relatedOut juste apr√®s #tags) -->

        <!-- description (existe d√©j√†, game.js d√©place le bloc) -->
        <div id="descriptionBox" class="game-block" style="display:none;">
          <h3>üìú Description</h3>
          <div id="descriptionText" style="color:var(--muted); line-height:1.45;"></div>
        </div>

        <!-- boutons -->
        <div class="btnMainRow">
          <a id="btnDiscord" class="btn btn-discord" target="_blank" rel="noopener" href="#">üí¨ Discord</a>
          <a id="btnF95" class="btn btn-f95" target="_blank" rel="noopener" href="#"><span class="f95-white"> F95</span><span class="f95-red">Zone</span></a>
        </div>

        <!-- MEGA -->
        <div class="btnRow">
          <a id="btnMega" class="btn" target="_blank" rel="noopener" href="#">üì• T√©l√©charger la traduction (MEGA)</a>

          <div class="likeWrap">
            <button id="btnLike" type="button" aria-label="J‚Äôaime">ü§ç</button>
          </div>
        </div>

        <!-- Stats -->
        <div id="statsOut" class="game-block">
          <h3>üìä Statistiques</h3>
          <div class="statsLine">
            üëÅÔ∏è Vues : <span id="statViews" class="statNum">0</span>
            üì• T√©l√©chargements : <span id="statMegaClicks" class="statNum">0</span>
            ‚ù§Ô∏è J‚Äôaime : <span id="statLikes" class="statNum">0</span>
          </div>
        </div>

        <!-- Notes -->
        <div id="notesBox" class="game-block" style="display:none;">
          <h3>üìù Notes</h3>
          <div id="notesText" style="color:var(--muted); line-height:1.45;"></div>
        </div>

        <!-- Archives -->
        <div id="archiveBox" style="display:none; align-items:center; gap:10px;">
          <a id="archiveLink" class="btn" target="_blank" rel="noopener" href="#">üì¶ Archives de la traduction</a>
        </div>

        <!-- Rating -->
        <div id="ratingBox" class="game-block">
          <h3>‚≠ê Note de la traduction</h3>
          <div style="display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;">
            <div>
              Moyenne : <strong id="ratingAvg">‚Äî</strong> ¬∑ Votes : <strong id="ratingCount">0</strong>
            </div>
            <div id="ratingChoices" style="display:flex; gap:8px; flex-wrap:wrap;"></div>
          </div>
          <div id="ratingMsg" style="margin-top:8px; color:var(--muted); font-size:13px;"></div>
        </div>

      </div>
    </section>
  </div>

  <!-- ‚úÖ Si tu as ces scripts dans /ant28jsp/, tu peux les activer -->
  <!--
  <script src="../viewer.menu.js"></script>
  <script src="../viewer.menu.about.js"></script>
  <script src="../viewer.menu.extension.js"></script>
  -->

  <!-- ‚úÖ le principal -->
  <script src="./game.js"></script>
</body>
</html>
